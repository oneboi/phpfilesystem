<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>查找文件和目录 | phpfilesystem</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="返回目录内容glob 以数组形式返回，参数1这个目录的所有内容，可以指定返回的具体类型
定义和用法glob() 函数返回一个包含匹配指定模式的文件名或目录的数组。该函数返回一个包含有匹配文件/目录的数组。如果失败则返回 FALSE。语法12345678910111213glob(pattern,flags)参数  描述pattern 必需。规定检索模式。flags   可选。规定特殊的设定。可能的">
<meta property="og:type" content="article">
<meta property="og:title" content="查找文件和目录">
<meta property="og:url" content="https://github.com/oneboi/phpfilesystem/2015/12/15/files6/index.html">
<meta property="og:site_name" content="phpfilesystem">
<meta property="og:description" content="返回目录内容glob 以数组形式返回，参数1这个目录的所有内容，可以指定返回的具体类型
定义和用法glob() 函数返回一个包含匹配指定模式的文件名或目录的数组。该函数返回一个包含有匹配文件/目录的数组。如果失败则返回 FALSE。语法12345678910111213glob(pattern,flags)参数  描述pattern 必需。规定检索模式。flags   可选。规定特殊的设定。可能的">
<meta property="og:updated_time" content="2015-12-15T09:36:22.165Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="查找文件和目录">
<meta name="twitter:description" content="返回目录内容glob 以数组形式返回，参数1这个目录的所有内容，可以指定返回的具体类型
定义和用法glob() 函数返回一个包含匹配指定模式的文件名或目录的数组。该函数返回一个包含有匹配文件/目录的数组。如果失败则返回 FALSE。语法12345678910111213glob(pattern,flags)参数  描述pattern 必需。规定检索模式。flags   可选。规定特殊的设定。可能的">
  
    <link rel="alternative" href="/atom.xml" title="phpfilesystem" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/phpfilesystem/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">phpfilesystem</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/oneboi/phpfilesystem"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-files6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/phpfilesystem/2015/12/15/files6/" class="article-date">
  <time datetime="2015-12-15T02:19:43.000Z" itemprop="datePublished">2015-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      查找文件和目录
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="u8FD4_u56DE_u76EE_u5F55_u5185_u5BB9"><a href="#u8FD4_u56DE_u76EE_u5F55_u5185_u5BB9" class="headerlink" title="返回目录内容"></a>返回目录内容</h1><p>glob 以数组形式返回，参数1这个目录的所有内容，可以指定返回的具体类型</p>
<p>定义和用法<br>glob() 函数返回一个包含匹配指定模式的文件名或目录的数组。<br>该函数返回一个包含有匹配文件/目录的数组。如果失败则返回 FALSE。<br>语法<br><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">glob(pattern,<span class="keyword">flags</span>)</span><br><span class="line"></span><br><span class="line">参数  描述</span><br><span class="line">pattern 必需。规定检索模式。</span><br><span class="line"><span class="keyword">flags</span>   可选。规定特殊的设定。</span><br><span class="line">可能的值：</span><br><span class="line">GLOB_MARK - 在每个返回的项目中加一个斜线</span><br><span class="line">GLOB_NOSORT - 按照文件在目录中出现的原始顺序返回（不排序）</span><br><span class="line">GLOB_NOCHECK - 如果没有文件匹配则返回用于搜索的模式</span><br><span class="line">GLOB_NOESCAPE - 反斜线不转义元字符</span><br><span class="line">GLOB_BRACE - 扩充 <span class="comment">&#123;a,b,c&#125;</span> 来匹配 <span class="string">'a'</span>，<span class="string">'b'</span> 或 <span class="string">'c'</span></span><br><span class="line">GLOB_ONLYDIR - 仅返回与模式匹配的目录项</span><br><span class="line">GLOB_ERR - （PHP <span class="number">5.1</span> 新增的）如果错误则停止，默认情况下忽略所有错误</span><br></pre></td></tr></table></figure></p>
<p>实例 1<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line">print_r(glob(<span class="string">"*.txt"</span>));</span><br><span class="line"><span class="preprocessor">?&gt;</span></span><br><span class="line">上面的代码将输出：</span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">[<span class="number">0</span>] =&gt; target.txt</span><br><span class="line">[<span class="number">1</span>] =&gt; source.txt</span><br><span class="line">[<span class="number">2</span>] =&gt; test.txt</span><br><span class="line">[<span class="number">3</span>] =&gt; test2.txt</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">实例 <span class="number">2</span></span><br><span class="line"><span class="preprocessor">&lt;?php</span></span><br><span class="line">print_r(glob(<span class="string">"*.*"</span>));</span><br><span class="line"><span class="preprocessor">?&gt;</span></span><br><span class="line">上面的代码将输出：</span><br><span class="line"><span class="keyword">Array</span></span><br><span class="line">(</span><br><span class="line">[<span class="number">0</span>] =&gt; contacts.csv</span><br><span class="line">[<span class="number">1</span>] =&gt; <span class="keyword">default</span>.php</span><br><span class="line">[<span class="number">2</span>] =&gt; target.txt</span><br><span class="line">[<span class="number">3</span>] =&gt; source.txt</span><br><span class="line">[<span class="number">4</span>] =&gt; tem1.tmp</span><br><span class="line">[<span class="number">5</span>] =&gt; test.htm</span><br><span class="line">[<span class="number">6</span>] =&gt; test.ini</span><br><span class="line">[<span class="number">7</span>] =&gt; test.php</span><br><span class="line">[<span class="number">8</span>] =&gt; test.txt</span><br><span class="line">[<span class="number">9</span>] =&gt; test2.txt</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>#遍历所有目录<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">/*<span class="keyword">function</span> globDir(<span class="variable">$dirname</span>,<span class="variable">$type</span>=<span class="string">''</span>)&#123;</span><br><span class="line">    if(<span class="variable">$type</span>==<span class="string">''</span>)&#123;</span><br><span class="line">    <span class="variable">$dirInfo</span> = glob(<span class="variable">$dirname</span>.<span class="string">'/*'</span>);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        <span class="variable">$dirInfo</span> = glob(<span class="variable">$dirname</span>.<span class="string">'/*.'</span>.<span class="variable">$type</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    return <span class="variable">$dirInfo</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$info</span> = globDir(<span class="string">'.'</span>,<span class="string">'php'</span>);</span><br><span class="line">print_r(<span class="variable">$info</span>);</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">/*<span class="keyword">function</span> globDir(<span class="variable">$dirname</span>,<span class="variable">$type</span>=<span class="string">''</span>)&#123;</span><br><span class="line"></span><br><span class="line">    if(<span class="variable">$type</span>==<span class="string">''</span>)&#123;</span><br><span class="line">    <span class="variable">$dirInfo</span> = glob(<span class="variable">$dirname</span>.<span class="string">'/*'</span>);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        <span class="variable">$dirInfo</span> = glob(<span class="variable">$dirname</span>.<span class="string">'/*.'</span>.<span class="variable">$type</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    foreach (<span class="variable">$dirInfo</span> as <span class="variable">$v</span>)&#123;</span><br><span class="line">        echo <span class="variable">$v</span>.<span class="string">"&lt;br/&gt;"</span>;</span><br><span class="line">        if(is_dir(<span class="variable">$v</span>))&#123;</span><br><span class="line">            globDir(<span class="variable">$v</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">globDir(<span class="string">'.'</span>);*/</span><br></pre></td></tr></table></figure></p>
<p>#打开目录, 读目录（看里面有什么内容）关掉目录（不观掉会占用资源）</p>
<p>opendir() 函数打开一个目录句柄，可由 closedir()，readdir() 和 rewinddir() 使用。<br>若成功，则该函数返回一个目录流，否则返回 false 以及一个 error。可以通过在函数名前加上 “@” 来隐藏 error 的输出。<br>语法<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">opendir</span><span class="params">(path,context)</span></span></span><br><span class="line">参数  描述</span><br><span class="line">path    必需。规定要打开的目录路径。</span><br><span class="line">context 可选。规定目录句柄的环境。context 是可修改目录流的行为的一套选项。</span><br></pre></td></tr></table></figure></p>
<p>例子 1<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">//打开 images 目录</span><br><span class="line"><span class="variable">$dir</span> = opendir(<span class="string">"images"</span>);</span><br><span class="line"></span><br><span class="line">//列出 images 目录中的文件</span><br><span class="line"><span class="keyword">while</span> ((<span class="variable">$file</span> = readdir(<span class="variable">$dir</span>)) !== <span class="literal">false</span>)</span><br><span class="line">  &#123;</span><br><span class="line">  echo <span class="string">"filename: "</span> . <span class="variable">$file</span> . <span class="string">"&lt;br /&gt;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  closedir(<span class="variable">$dir</span>);</span><br><span class="line">?&gt; </span><br><span class="line">输出：</span><br><span class="line">filename: .</span><br><span class="line">filename: ..</span><br><span class="line">filename: cat.gif</span><br><span class="line">filename: dog.gif</span><br><span class="line">filename: food</span><br><span class="line">filename: horse.gif</span><br></pre></td></tr></table></figure></p>
<p>例子 2<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">如果 opendir() 的输出失败，本例会隐藏错误：</span><br><span class="line">&lt;?php</span><br><span class="line">//打开 images 目录</span><br><span class="line"><span class="variable">$dir</span> = @ opendir(<span class="string">"images"</span>);</span><br><span class="line"></span><br><span class="line">//列出 images 目录中的文件</span><br><span class="line"><span class="keyword">while</span> ((<span class="variable">$file</span> = readdir(<span class="variable">$dir</span>)) !== <span class="literal">false</span>)</span><br><span class="line">  &#123;</span><br><span class="line">  echo <span class="string">"filename: "</span> . <span class="variable">$file</span> . <span class="string">"&lt;br /&gt;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  closedir(<span class="variable">$dir</span>);</span><br><span class="line">?&gt; </span><br><span class="line">输出：</span><br><span class="line">filename: .</span><br><span class="line">filename: ..</span><br><span class="line">filename: cat.gif</span><br><span class="line">filename: dog.gif</span><br><span class="line">filename: food</span><br><span class="line">filename: horse.gif</span><br></pre></td></tr></table></figure></p>
<p>#自己操作<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">返回一个目录流</span><br><span class="line"> <span class="variable">$dir</span>=opendir(<span class="string">'king'</span>);</span><br><span class="line">// 文件指针指向第一个文件</span><br><span class="line"></span><br><span class="line">echo readdir(<span class="variable">$dir</span>);</span><br><span class="line">echo readdir(<span class="variable">$dir</span>);</span><br><span class="line">echo readdir(<span class="variable">$dir</span>);</span><br><span class="line">结果</span><br><span class="line">...king.txt</span><br><span class="line"> ?&gt;</span><br></pre></td></tr></table></figure></p>
<p>#循环输出<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (<span class="variable">$file</span> = readdir(<span class="variable">$dir</span>))&#123;</span><br><span class="line">    echo <span class="variable">$file</span>.<span class="string">"&lt;br/&gt;"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h1 id="u8BFB_u76EE_u5F55"><a href="#u8BFB_u76EE_u5F55" class="headerlink" title="读目录"></a>读目录</h1><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">readdir(<span class="variable">$dir</span>)</span><br></pre></td></tr></table></figure>
<p>#关掉额、文件夹，释放资源<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">closedir(<span class="variable">$dir</span>);</span><br></pre></td></tr></table></figure></p>
<h1 id="u91CD_u7F6E_u76EE_u5F55_u53E5_u67C4"><a href="#u91CD_u7F6E_u76EE_u5F55_u53E5_u67C4" class="headerlink" title="重置目录句柄"></a>重置目录句柄</h1><p>rewinddir() 函数重置由 opendir() 打开的目录句柄。<br>本函数什么都不会返回。<br>语法<br>rewinddir(dir_stream)<br>参数  描述<br>dir_stream  必需。规定要使用的目录句柄。<br>提示和注释<br>提示：本函数重读目录，并可用于检查目录中的变化。<br>例子<br><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">//打开 images 目录</span><br><span class="line"><span class="variable">$dir</span> = opendir(<span class="string">"images"</span>);</span><br><span class="line"></span><br><span class="line">//列出 images 目录中的文件</span><br><span class="line"><span class="keyword">while</span> ((<span class="variable">$file</span> = readdir(<span class="variable">$dir</span>)) !== <span class="literal">false</span>)</span><br><span class="line">  &#123;</span><br><span class="line">  echo <span class="string">"filename: "</span> . <span class="variable">$file</span> . <span class="string">"&lt;br /&gt;"</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">//重置目录流</span><br><span class="line">rewinddir(<span class="variable">$dir</span>);</span><br><span class="line"></span><br><span class="line">//供检查变化的代码</span><br><span class="line"></span><br><span class="line">closedir(<span class="variable">$dir</span>);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/oneboi/phpfilesystem/2015/12/15/files6/" data-id="cii773bor00052gmks2924l72" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/phpfilesystem/tags/fliesystem/">fliesystem</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/phpfilesystem/2015/12/15/fiels7/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          目录操作
        
      </div>
    </a>
  
  
    <a href="/phpfilesystem/2015/12/15/file5/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">目录操作</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/phpfilesystem/tags/fliesystem/">fliesystem</a><span class="tag-list-count">8</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/phpfilesystem/tags/fliesystem/" style="font-size: 10px;">fliesystem</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/phpfilesystem/archives/2015/12/">December 2015</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/phpfilesystem/2015/12/15/email/">email</a>
          </li>
        
          <li>
            <a href="/phpfilesystem/2015/12/15/fiels7/">目录操作</a>
          </li>
        
          <li>
            <a href="/phpfilesystem/2015/12/15/files6/">查找文件和目录</a>
          </li>
        
          <li>
            <a href="/phpfilesystem/2015/12/15/file5/">目录操作</a>
          </li>
        
          <li>
            <a href="/phpfilesystem/2015/12/14/files4/">目录操作函数</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 king<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/phpfilesystem/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/phpfilesystem/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/phpfilesystem/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>